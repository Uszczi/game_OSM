/*
 * Maze.cpp
 *
 *  Created on: 9 sty 2021
 *      Author: mateu
 */

#include "Maze.h"
#include "Node.h"

#include <utility>

static const std::vector<std::pair<int, int>> coords = {
		{124, 22}, {204, 22}, {296, 22}, {124, 84},
		{204, 84}, {250, 84}, {296, 84}, {124, 132}, {204, 132},
		{250, 132}, {296, 132}, {250, 170}, {296, 170}, {204, 220},
		{250, 220}, {250, 270}, {124, 316}, {204, 316}, {250, 316},
		{296, 316}, {124, 362}, {158, 362}, {204, 362}, {250, 362},
		{296, 362}, {124, 412}, {158, 412}, {204, 412}, {250, 412},
		{296, 412}, {124, 458}, {296, 458}, {516, 22}, {436, 22},
		{344, 22}, {516, 84}, {436, 84}, {390, 84}, {344, 84},
		{516, 132}, {436, 132}, {390, 132}, {344, 132}, {390, 170},
		{344, 170}, {436, 220}, {390, 220}, {390, 270}, {516, 316},
		{436, 316}, {390, 316}, {344, 316}, {516, 362}, {482, 362},
		{436, 362}, {390, 362}, {344, 362}, {516, 412}, {482, 412},
		{436, 412}, {390, 412}, {344, 412}, {516, 458}, {344, 458},
		{320, 270}
};

static const std::vector<std::vector<int>> connections = {
		{1, 3}, {2, 4}, {6}, {4, 7}, {5, 8}, {6, 9},
		{38}, {8}, {13}, {10}, {12}, {12, 14}, {44},
		{14, 17}, {15}, {18}, {17, 20}, {18, 22}, {19},
		{24}, {21}, {26}, {23, 27}, {24, 28}, {56},
		{26, 30}, {27}, {}, {29}, {31}, {31}, {63},
		{33, 35}, {34, 36}, {38}, {36, 39}, {37, 40},
		{38, 41}, {}, {40}, {45}, {42}, {44}, {44, 46},
		{}, {46, 49}, {47}, {50}, {49, 52}, {50, 54},
		{51}, {56}, {53}, {58}, {55, 59}, {56, 60},
		{}, {58, 62}, {59}, {}, {61}, {63}, {63}, {},
		{15, 47}
};

Maze::Maze()
{
	nodes.reserve(coords.size());

	for(const auto& coord: coords)
		nodes.push_back(new Node(coord.first, coord.second));

	int index = 0;
	for(const auto& neighbours : connections)
	{
		for(const auto& neighbour : neighbours)
			nodes[index]->add(nodes[neighbour]);
		++index;
	}
}

Maze::~Maze()
{
	for(auto &node: nodes)
		delete node;
}

Node* Maze::start() const
{
	return nodes.back();
}
